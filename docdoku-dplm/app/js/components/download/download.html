<md-dialog flex="50" layout="column">

    <div layout="row">

        <form ng-submit="submit()" layout="row">

            <div layout="column" layout-margin>

                <h2 class="md-headline">
                    {{'DOWNLOAD' | translate}}
                </h2>

                <div class="md-subhead description">
                    {{files.length}} {{'FILES_TO_DOWNLOAD' | translate}}
                </div>

                <div layout="row" layout-align="start center">
                    <i class="material-icons">folder_open</i>
                    <md-input-container flex>

                        <label>{{'CHOOSE_DESTINATION_FOLDER'| translate}}</label>

                        <md-select required ng-model="options.destinationFolder">
                            <md-option ng-value="folder.uuid" ng-repeat="folder in folders">
                                {{folder.path | fileShortName}}
                            </md-option>
                        </md-select>
                    </md-input-container>
                </div>

                <md-virtual-repeat-container class="virtual-list virtual-list-col-5">
                    <div md-virtual-repeat="file in files" class="repeated-item" flex>
                        {{file | fileShortName}}
                    </div>
                </md-virtual-repeat-container>

                <p ng-if="error">{{error}}</p>

                <p ng-if="status">{{status}}</p>

                <div layout="row">
                    <md-button type="button" ng-if="!loading" aria-label="" ng-click="close()"
                               class="md-raised md-default">
                        {{'CLOSE'|translate}}
                    </md-button>

                    <md-progress-circular ng-if="loading" class="md-hue-2" md-diameter="20px"></md-progress-circular>

                    <md-button ng-if="!loading" type="submit" aria-label="" class="md-raised md-primary">
                        {{'DOWNLOAD'|translate}}
                    </md-button>
                </div>

            </div>

            <div layout="column" layout-margin>
                <div layout="row" layout-align="start center">
                    <md-switch ng-model="showAdvancedOptions" aria-label="{{'ADVANCED_OPTIONS' | translate}}">
                        {{'ADVANCED_OPTIONS' | translate}}
                    </md-switch>
                </div>

                <div layout="column" ng-show="showAdvancedOptions">

                    <div layout="column" ng-show="showAdvancedOptions">

                        <md-checkbox ng-model="options.checkOutItems" aria-label="{{'CHECK_OUT_ITEMS'|translate}}">
                            {{'CHECK_OUT_ITEMS'|translate}}
                        </md-checkbox>

                        <md-checkbox ng-model="options.checkOutItemsRecursive" aria-label="{{'CHECK_OUT_ITEMS'|translate}}">
                            {{'CHECK_OUT_RECURSIVE'|translate}}
                        </md-checkbox>

                    </div>

                </div>

            </div>

        </form>
    </div>
</md-dialog>

