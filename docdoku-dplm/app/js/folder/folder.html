<div layout-fill layout="column">
    <md-toolbar md-scroll-shrink>
        <div class="md-toolbar-tools" layout="row" layout-align="start center">
            <div>
                <md-button class="md-icon-button" hide-gt-sm aria-label="{{'MENU' | translate}}" ng-click="openMenu()">
                    <i class="fa fa-bars"></i>
                </md-button>
            </div>
            <div>
                <md-menu>
                    <md-button aria-label="{{'MENU'}}" class="md-icon-button" ng-click="$mdOpenMenu($event)">
                        <i class="fa fa-bars"></i>
                    </md-button>

                    <md-menu-content width="4">
                        <md-menu-item>
                            <md-button aria-label="{{'OPEN_IN_EXPLORER'|translate}}" ng-click="reveal()">
                                {{'OPEN_IN_EXPLORER'|translate}}
                            </md-button>
                        </md-menu-item>

                        <md-menu-item>
                            <md-button aria-label="{{'FAVORITE'|translate}}" ng-click="toggleFavorite()">
                                {{'FAVORITE'|translate}}
                            </md-button>
                        </md-menu-item>

                        <md-menu-item>
                            <md-button aria-label="{{'REFRESH_FOLDER'|translate}}" ng-click="refresh(true)">
                                {{'REFRESH_FOLDER'|translate}}
                            </md-button>
                        </md-menu-item>

                        <md-menu-item>
                            <md-button aria-label="{{'DELETE_FOLDER'|translate}}" ng-click="delete($event)">
                                {{'DELETE_FOLDER'|translate}}
                            </md-button>
                        </md-menu-item>

                    </md-menu-content>
                </md-menu>
            </div>
            <div>
                <h2>
                    <span>
                        <i class="fa fa-folder-open"></i>
                        <i class="fa fa-star favorite" ng-if="folder.favorite"></i>
                        {{ folder.path | fileshortname }} ({{totalFilesInFolder}} {{'FILES'|translate}})
                    </span>
                </h2>
            </div>
        </div>
    </md-toolbar>
    <md-content>

        <div layout="row" layout-align="space-between start" layout-padding>

            <div class="md-inline-form">
                <md-input-container>
                    <label>{{'SEARCH'|translate}}</label>
                    <input type="text" ng-change="search()" ng-model="pattern" />
                </md-input-container>
            </div>

            <div>
                <md-input-container>
                    <label>{{'FILTERS'|translate}}</label>
                    <md-select md-container-class="hidden-value" ng-change="search()" ng-model="selectedFilters" multiple>
                        <md-optgroup label="{{'FILTERS'|translate}}">
                            <md-option ng-value="filter.value" ng-repeat="filter in filters">{{filter.name}}</md-option>
                        </md-optgroup>
                    </md-select>
                </md-input-container>
            </div>

            <div>
                <md-table-pagination
                        md-boundary-links="true"
                        md-limit="query.limit"
                        md-limit-options="query.limits"
                        md-page="query.page"
                        md-total="{{filteredFilesCount}}"
                        md-on-paginate="paginate"
                        md-page-select>
                </md-table-pagination>
            </div>

        </div>


        <div>
            <md-table-container>
                <table md-table md-row-select multiple ng-model="selected">
                    <thead md-head>
                        <tr md-row>
                            <th md-column><span>{{'NAME'|translate}}</span></th>
                            <th md-column><span>{{'TYPE'|translate}}</span></th>
                            <th md-column><span>{{'WORKSPACE'|translate}}</span></th>
                            <th md-column><span>{{'ID'|translate}}</span></th>
                            <th md-column><span>{{'VERSION'|translate}}</span></th>
                            <th md-column><span>{{'ITERATION'|translate}}</span></th>
                            <th md-column><span>{{'LAST_MODIFIED'|translate}}</span></th>
                            <th md-column><span></span></th>
                        </tr>
                    </thead>
                    <tbody md-body>
                        <tr md-row md-select="file" md-select-id="path" ng-repeat="file in displayedFiles">
                            <td md-cell>{{file.path | fileshortname}}</td>
                            <td md-cell>{{file.stat.size | humanreadablesize}}</td>

                            <td md-cell>
                                <span ng-if="file.index.id">{{ 'DOCUMENTS' | translate }}</span>
                                <span ng-if="file.index.partNumber">{{ 'PARTS' | translate }}</span>
                                <span ng-if="!file.index.partNumber && !file.index.id"> - </span>
                            </td>

                            <td md-cell>{{file.index.workspace || '-' }}</td>
                            <td md-cell>{{file.index.id || file.index.partNumber || '-' }}</td>
                            <td md-cell>{{file.index.revision || '-' }}</td>
                            <td md-cell>{{file.index.iteration || '-'  }}</td>
                            <td md-cell>{{file.index.lastModifiedDate |Â date:'medium' || '-' }}</td>
                            <td md-cell>

                                <md-menu>

                                    <md-button aria-label="{{'MENU'}}" class="md-icon-button" ng-click="$mdOpenMenu($event)">
                                        <md-icon md-svg-icon="img/more_vert.svg"></md-icon>
                                    </md-button>

                                    <md-menu-content>

                                        <md-menu-item  ng-if="!file.index">
                                            <md-button aria-label="{{'CREATE_PART'|translate}}" ng-click="createPart(file)">
                                                {{'CREATE_PART'|translate}}
                                            </md-button>
                                        </md-menu-item>

                                        <md-menu-item  ng-if="!file.index">
                                            <md-button aria-label="{{'CREATE_DOCUMENT'|translate}}" ng-click="createDocument(file)">
                                                {{'CREATE_DOCUMENT'|translate}}
                                            </md-button>
                                        </md-menu-item>

                                        <md-menu-item ng-if="file.index">
                                            <md-button aria-label="{{'CHECKIN'|translate}}" ng-click="checkin(file)">
                                                {{'CHECKIN'|translate}}
                                            </md-button>
                                        </md-menu-item>

                                        <md-menu-item ng-if="file.index">
                                            <md-button aria-label="{{'CHECKOUT'|translate}}" ng-click="checkout(file)">
                                                {{'CHECKOUT'|translate}}
                                            </md-button>
                                        </md-menu-item>

                                    </md-menu-content>

                                </md-menu>

                            </td>
                        </tr>
                    </tbody>
                </table>
            </md-table-container>
        </div>
    </md-content>
</div>